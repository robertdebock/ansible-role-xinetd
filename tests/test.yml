---
- hosts: localhost
  remote_user: root

  roles:
    - ansible-role-xinetd

  tasks:
    - name: register the status of /etc/xinetd.d
      stat:
        path: /etc/xinetd.d
      register: stat_xinetd

    - name: fail if /etc/xinetd.d does not exist
      fail:
        msg: "/etc/xinetd.d does not exist"
      when: stat_xinetd.stat.isdir == false
