---
language: python

python:
  - "3.7"

services:
  - docker

env:
  global:
    namespace="robertdebock"
  matrix:
    # - namespace="archlinux" image="base"
    - image="debian" tag="stable"
    - image="debian" tag="unstable"
    - image="debian"
    - image="centos" tag="7"
    - image="redhat" tag="7"
    - image="centos"
    - image="redhat"
    - image="fedora"
    - image="fedora" tag="rawhide"
    - image="opensuse"
    - image="ubuntu" tag="rolling"
    - image="ubuntu" tag="devel"
    - image="ubuntu"

matrix:
  allow_failures:
    - env: image="debian" tag="unstable"
    - env: image="fedora" tag="rawhide"
    - env: image="ubuntu" tag="rolling"
    - env: image="ubuntu" tag="devel"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack:
    secure: "QPpS0FNL8bkE2fJeVWBKEalK5V5ApdtcsNgUh9xNPQGBOl8YTVii9j2n1P5lxsvXQP967z7h5YvsJjYHgSpZS789Uea1MkaiCQ0qOGxgZmHVW3OQ2UDXGosryT61Ko1PDpzxkDtTGz6oQvbYXJA7OjvUEATbGQy/uesY9YGBZlI5xxtCchuLfV2bbsnQsnq59Df/aMYjR/8ZdyDTkIHWfTocd4NQTvuKYRRLttMpAwrOxKIg0D0/j9iBVEfRt2OvMRYn+5pGRiOmg01NpyHwDOaPxmtXOCrVoHJopEjk2++zh4txc2IJYmXuvUiLyycIarpVZ0nxbtyCSyzGF6rlr5H4TAFeiWYaRm1XQUyudLa+FblrauBJumgP+O9Z5iZXKafQNTzi6UHavaNFiFW0n4RpGj2NgBHvc2Qu0+PAGRC1qjfCrODAiPQeFAhmyTfOUnoOBB5q2m1FplOsbYumM9ASykmFQVuzi963yO7jI+fpnx1FSbo7WoMTclqXg4IXVSQUjbAJw1XIW7hNXnIGrZKZ13eah3LvCftY3n62ndQYpsaQsoZvTERuFlEKf/wj+MU/GyjYe3LqRA3XLFXrMszuDV2nvVqY9ZB9r1sHazWIJBYrK2rSnxVtlxr6C5GcRFWm0xesLgmW90GiMQo0cjwqQTUNcesevN8hD+ZGw4U="
  email: false
